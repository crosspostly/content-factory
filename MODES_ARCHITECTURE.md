# Архитектура режимов Content Factory

## Текстовые режимы (Part 1: Script Generation)

Определяют **ДЛИНУ И СТИЛЬ** сценария:

| Режим | Длина | Длительность | Назначение | Статус |
|-------|-------|--------------|-----------|---------|
| **shorts** | 200-400 символов | ~30-60 сек | YouTube Shorts, TikTok, Reels | ✅ Production |
| **long_form** | 800-1500 символов | ~10-12 мин | YouTube длинные видео | ✅ Production |
| **weekly** | 500-1000 символов | ~5-7 мин | Еженедельные видео | ⚠️ Неиспользуемый |
| **ad** | 100-200 символов | ~15-30 сек | Рекламные ролики | ✅ Production |

### Реализация в коде
```python
# core/generators/script_generator.py
MIN_SCRIPT_LENGTH = {
    "shorts": 200,      # ~30 seconds TTS
    "long_form": 800,   # ~10 minutes TTS  
    "weekly": 500,      # ~5 minutes TTS  ← НЕИСПОЛЬЗУЕМЫЙ
    "ad": 100,          # ~15 seconds TTS
}
```

## Видеорежимы (Part 3: Video Rendering)

Определяют **КАК РЕНДЕРИТЬ** видео:

| Режим | Разрешение | FPS | Фон | Назначение | Статус |
|-------|-----------|-----|-----|-----------|---------|
| **shorts** | 1080x1920 | 30 | Pixabay/Gradient | Вертикальное | ✅ MVP |
| **long_form** | 1920x1080 | 30 | Pixabay/Gradient | Горизонтальное | ✅ MVP |
| **ad** | 1080x1920 | 30 | Pixabay/Gradient | Вертикальное | ✅ MVP |

### Реализация в коде
```python
# Video resolution mapping
resolutions = {
    "shorts": (1080, 1920),   # 9:16
    "long_form": (1920, 1080), # 16:9
    "ad": (1080, 1920),       # 9:16
}
```

## Связь текстовых режимов и видеорежимов

### ТЕКУЩАЯ РЕАЛИЗАЦИЯ
- **Текстовый режим → Видеорежим (1:1 маппинг)**
  - `shorts` script → `shorts` video
  - `long_form` script → `long_form` video  
  - `ad` script → `ad` video

### Конфигурация
```yaml
# projects/youtube_horoscope/config.yaml
generation:
  script_mode: "shorts"  # Текстовый режим
  # Видеорежим определяется автоматически

# Автоматический маппинг в коде
video_mode = script_mode  # 1:1 связь
```

## Part 4: Планируемая система режимов (Issue #24)

В будущем планируется объединить в одну модульную систему:

```python
class BaseContentMode(ABC):
    """Один режим = один полный цикл (сценарий + видео)"""
    
    def generate_script(self, config: ProjectConfig, date: str) -> dict:
        """Генерация сценария"""
        pass
        
    def render_video(self, script: dict, config: ProjectConfig) -> str:
        """Рендеринг видео"""
        pass

class ShortsCarousel(BaseContentMode):
    """Текст → Slides видео"""
    
class AnimationAI(BaseContentMode):
    """Текст → React компоненты → Remotion"""
    
class TextStock(BaseContentMode):
    """Текст → Стоковое видео"""
```

### Важные отличия от текущей архитектуры:
- **Это РАЗНЫЕ режимы ВИДЕОРЕНДЕРИНГА**, не замена текстовых режимов!
- Текстовые режимы (`shorts`, `long_form`, `ad`) останутся
- Добавятся новые способы рендеринга видео
- Каждый режим может использовать любой текстовый формат

## Текущие ограничения

### ❌ НЕ реализовано
- Смешанные режимы (короткий текст → длинное видео)
- Кастомные маппинги (ad text → long_form video)
- Гибкая система разрешений
- Разные стили рендеринга для одного текстового режима

### ✅ Готово
- Четкое разделение текстовых и видеорежимов
- Автоматический 1:1 маппинг
- Валидация длины сценариев
- Production-ready генерация контента

## Миграция на Issue #24

При реализации Issue #24 нужно:
1. Сохранить существующие текстовые режимы
2. Добавить новые классы видеорежимов
3. Обновить конфигурацию для выбора видеорежима
4. Обеспечить обратную совместимость