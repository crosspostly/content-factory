name: Install Qwen Code CLI

on:
  workflow_dispatch:  # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  install-qwen:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'  # Node.js 20+ required
      
      - name: Install Qwen Code CLI globally
        run: |
          npm install -g @qwen-code/qwen-code@latest
          qwen --version
      
      - name: Test Qwen Code installation
        env:
          OPENAI_API_KEY: ${{ secrets.QWEN_ACCESS_TOKEN }}
          OPENAI_BASE_URL: https://dashscope.aliyuncs.com/compatible-mode/v1
          OPENAI_MODEL: qwen-max
        run: |
          echo "ü§ñ Qwen Code —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:"
          qwen --version
          echo ""
          echo "üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:"
          echo "  OPENAI_API_KEY: set ‚úÖ"
          echo "  OPENAI_BASE_URL: $OPENAI_BASE_URL"
          echo "  OPENAI_MODEL: $OPENAI_MODEL"
          echo ""
          echo "Qwen Code –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ"
      
      - name: Summary
        run: |
          echo "## ü§ñ Qwen Code CLI –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
          echo ""
          echo "‚úÖ Node.js 20+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
          echo "‚úÖ Qwen Code CLI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
          echo "‚úÖ –û–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ"
          echo ""
          echo "## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ workflow:"
          echo ""
          echo '```yaml'
          echo "- name: Use Qwen Code CLI"
          echo "  env:"
          echo "    OPENAI_API_KEY: \${{ secrets.QWEN_ACCESS_TOKEN }}"
          echo "    OPENAI_BASE_URL: https://dashscope.aliyuncs.com/compatible-mode/v1"
          echo "    OPENAI_MODEL: qwen-max"
          echo "  run: |"
          echo "    echo 'Analyze architecture' | qwen"
          echo "    # –∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ qwen –∫–æ–º–∞–Ω–¥—ã"
          echo '```'
