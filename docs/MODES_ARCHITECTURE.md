# ğŸ—ï¸ Content Factory - ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ²

**Ğ”Ğ°Ñ‚Ğ°:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0.0

---

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CONTENT FACTORY ARCHITECTURE               â”‚
â”‚                                                              â”‚
â”‚  Config-driven pipeline Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ğ¸Ğ´ĞµĞ¾ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€ CONFIGURATION LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  ğŸ“„ config/shared.yaml (Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸)                â”‚
â”‚  ğŸ“„ projects/<project>/config.yaml (Ğ¿Ñ€Ğ¾ĞµĞºÑ‚-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ)      â”‚
â”‚                                                              â”‚
â”‚  generation:                                                 â”‚
â”‚    script_mode: "shorts" | "long_form" | "ad"                â”‚
â”‚    # â†’ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ñ‚Ğ¸Ğ¿ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°                   â”‚
â”‚                                                              â”‚
â”‚  audio:                                                      â”‚
â”‚    primary_engine: "gemini-2.5-flash"                        â”‚
â”‚    fallback_engine: "gemini-2.5-flash-lite"                  â”‚
â”‚    # â†’ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ TTS engine (âš ï¸ BROKEN)                       â”‚
â”‚                                                              â”‚
â”‚  video:                                                      â”‚
â”‚    format: "shorts" (9:16) | "long_form" (16:9) | "ad"      â”‚
â”‚    fps: 30                                                   â”‚
â”‚    codec: libx264                                            â”‚
â”‚    # â†’ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ²Ğ¸Ğ´ĞµĞ¾Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ°                             â”‚
â”‚                                                              â”‚
â”‚  subtitles:                                                  â”‚
â”‚    enabled: false  # âŒ Part 4 - Ğ½Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾              â”‚
â”‚    # â†’ ĞšĞ¾Ğ³Ğ´Ğ° Ğ±ÑƒĞ´ÑƒÑ‚ ÑÑƒĞ±Ñ‚Ğ¸Ñ‚Ñ€Ñ‹                                  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€ PIPELINE ORCHESTRATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚  ğŸ“¦ core/pipeline_orchestrator.py                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. SCRIPT GENERATION                                â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    script_generator.generate_short()                â”‚    â”‚
â”‚  â”‚    script_generator.generate_long_form()            â”‚    â”‚
â”‚  â”‚    script_generator.generate_ad()                   â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Input:  config, target_date, api_key             â”‚    â”‚
â”‚  â”‚    Output: script_dict (JSON)                       â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Example:                                         â”‚    â”‚
â”‚  â”‚    {                                                â”‚    â”‚
â”‚  â”‚      "hook": "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ",                 â”‚    â”‚
â”‚  â”‚      "script": "Ğ¢ĞµĞºÑÑ‚ 200-400 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²",            â”‚    â”‚
â”‚  â”‚      "visual_hints": ["stars", "zodiac"],           â”‚    â”‚
â”‚  â”‚      "duration_sec_target": 45                      â”‚    â”‚
â”‚  â”‚    }                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 2. TTS SYNTHESIS                                    â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    tts_generator.synthesize()                       â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Input:  script_dict, mode, api_key               â”‚    â”‚
â”‚  â”‚    Process: Text â†’ Gemini TTS API                   â”‚    â”‚
â”‚  â”‚    Output: audio_map (WAV files + metadata)         â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    âš ï¸ CRITICAL BUG: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ SILENT WAV              â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Example:                                         â”‚    â”‚
â”‚  â”‚    {                                                â”‚    â”‚
â”‚  â”‚      "blocks": {                                    â”‚    â”‚
â”‚  â”‚        "main": "output/audio/project/shorts.wav"    â”‚    â”‚
â”‚  â”‚      },                                             â”‚    â”‚
â”‚  â”‚      "total_duration_sec": 45.0,                    â”‚    â”‚
â”‚  â”‚      "engine_used": "gemini-2.5-flash-tts"          â”‚    â”‚
â”‚  â”‚    }                                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 3. VIDEO RENDERING                                  â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    video_renderer.render()                          â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Input:  script_dict, audio_map, mode             â”‚    â”‚
â”‚  â”‚    Process: Background + Text + Audio â†’ FFmpeg      â”‚    â”‚
â”‚  â”‚    Output: video.mp4                                â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Supports:                                        â”‚    â”‚
â”‚  â”‚    - shorts (9:16, 1080x1920)                       â”‚    â”‚
â”‚  â”‚    - long_form (16:9, 1920x1080)                    â”‚    â”‚
â”‚  â”‚    - ad (9:16, 1080x1920)                           â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    âš ï¸ Limitations:                                  â”‚    â”‚
â”‚  â”‚    - No subtitles                                   â”‚    â”‚
â”‚  â”‚    - Slow rendering (5-20 min)                      â”‚    â”‚
â”‚  â”‚    - No retry logic                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 4. [FUTURE] SUBTITLE PROCESSING                     â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    subtitle_processor.add_subtitles()               â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Input:  video.mp4, audio.wav                     â”‚    â”‚
â”‚  â”‚    Process: WhisperX â†’ SRT â†’ ffmpeg embed           â”‚    â”‚
â”‚  â”‚    Output: video_with_subs.mp4                      â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    âŒ NOT IMPLEMENTED (Part 4)                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 5. [FUTURE] PLATFORM UPLOAD                         â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    uploader.upload_to_youtube()                     â”‚    â”‚
â”‚  â”‚    uploader.upload_to_tiktok()                      â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    Input:  video_with_subs.mp4, metadata            â”‚    â”‚
â”‚  â”‚    Output: YouTube/TikTok URL                       â”‚    â”‚
â”‚  â”‚    â†“                                                â”‚    â”‚
â”‚  â”‚    âŒ NOT IMPLEMENTED (Part 5)                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â†“ Ğ¢Ğ•ĞšĞ£Ğ©Ğ˜Ğ™ Ğ¡Ğ¢ĞĞ¢Ğ£Ğ¡ â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IMPLEMENTATION STATUS (Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025)                        â”‚
â”‚                                                              â”‚
â”‚  âœ… Step 1-3: DONE (MVP, Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸)                    â”‚
â”‚  âŒ Step 4:   NOT STARTED (Subtitles)                        â”‚
â”‚  âŒ Step 5:   NOT STARTED (Upload)                           â”‚
â”‚                                                              â”‚
â”‚  ğŸ”´ CRITICAL BLOCKERS:                                       â”‚
â”‚    - Step 2 (TTS) ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ñ‚Ğ¸ÑˆĞ¸Ğ½Ñƒ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°              â”‚
â”‚    - Step 3 (Video) Ğ±ĞµĞ· ÑÑƒĞ±Ñ‚Ğ¸Ñ‚Ñ€Ğ¾Ğ²                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° (Content Modes)

### 1. `shorts` - YouTube Shorts (Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾)

```yaml
# ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
generation:
  script_mode: shorts

video:
  format: shorts
  width: 1080
  height: 1920
  aspect: "9:16"
  fps: 30
  duration_target_sec: 30-60
```

**Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸:**
- **Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:** 30-60 ÑĞµĞºÑƒĞ½Ğ´
- **Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:** 1080x1920 (9:16)
- **Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚:** 200-400 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
- **Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:** hook + content + CTA
- **Ğ¡Ñ‚Ğ¸Ğ»ÑŒ:** Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡Ğ½Ñ‹Ğ¹, Ğ·Ğ°Ñ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹

**Pipeline:**
```
Config â†’ generate_short() â†’ synthesize(mode="shorts") â†’ render(mode="shorts")
   â†“           â†“                      â†“                        â†“
shorts.json  shorts.wav          shorts.mp4 (no subs)
```

**Output:**
```
output/
â”œâ”€â”€ scripts/project/20251213/short_abc123.json
â”œâ”€â”€ audio/project/shorts_main.wav
â””â”€â”€ videos/project/shorts.mp4
```

---

### 2. `long_form` - YouTube Long Video (Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾)

```yaml
# ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
generation:
  script_mode: long_form

video:
  format: long_form
  width: 1920
  height: 1080
  aspect: "16:9"
  fps: 30
  duration_target_min: 10-12
```

**Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸:**
- **Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:** 10-12 Ğ¼Ğ¸Ğ½ÑƒÑ‚
- **Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:** 1920x1080 (16:9)
- **Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚:** 800-1500 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
- **Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:** intro + 3 Ğ±Ğ»Ğ¾ĞºĞ° (love/money/health) + outro
- **Ğ¡Ñ‚Ğ¸Ğ»ÑŒ:** ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·

**Pipeline:**
```
Config â†’ generate_long_form() â†’ synthesize(mode="long_form") â†’ render(mode="long_form")
   â†“              â†“                        â†“                           â†“
long_form.json   love.wav             long_form.mp4
                 money.wav             (intro + 3 blocks + outro)
                 health.wav
```

**Structure:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Intro    â”‚  Love Block  â”‚ Money Block  â”‚ Health Block â”‚   Outro    â”‚
â”‚   3 sec    â”‚   3-4 min    â”‚   3-4 min    â”‚   2-3 min    â”‚   2 sec    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Title text   Block-specific  Block-specific  Block-specific  Thank you
               background      background      background      message
```

**Output:**
```
output/
â”œâ”€â”€ scripts/project/20251213/long_form_xyz456.json
â”œâ”€â”€ audio/project/
â”‚   â”œâ”€â”€ long_form_love.wav
â”‚   â”œâ”€â”€ long_form_money.wav
â”‚   â””â”€â”€ long_form_health.wav
â””â”€â”€ videos/project/long_form.mp4
```

---

### 3. `ad` - Advertising (Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾)

```yaml
# ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
generation:
  script_mode: ad

video:
  format: ad
  width: 1080
  height: 1920
  aspect: "9:16"
  fps: 30
  duration_target_sec: 15-30
```

**Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸:**
- **Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:** 15-30 ÑĞµĞºÑƒĞ½Ğ´
- **Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ:** 1080x1920 (9:16)
- **Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚:** 100-200 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
- **Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:** hook + narration + CTA
- **Ğ¡Ñ‚Ğ¸Ğ»ÑŒ:** Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ğ¹, ÑƒĞ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹

**Pipeline:**
```
Config â†’ generate_ad() â†’ synthesize(mode="ad") â†’ render(mode="ad")
   â†“           â†“               â†“                      â†“
ad.json     ad.wav          ad.mp4
```

**Output:**
```
output/
â”œâ”€â”€ scripts/project/20251213/ad_def789.json
â”œâ”€â”€ audio/project/ad_main.wav
â””â”€â”€ videos/project/ad.mp4
```

---

### 4. `weekly` - Weekly Summary (âš ï¸ ĞĞ• Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—Ğ£Ğ•Ğ¢Ğ¡Ğ¯)

```yaml
# ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ğ½Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ°)
generation:
  script_mode: weekly  # âš ï¸ No function implemented
```

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** 
- âš ï¸ ĞšĞ¾Ğ´ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ (`MIN_SCRIPT_LENGTH["weekly"] = 500`)
- âŒ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ `generate_weekly()` Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
- â“ Use case Ğ½Ğµ ÑÑĞµĞ½

**TODO:**
- Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚ Ğ˜Ğ›Ğ˜
- Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `generate_weekly()` Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ

---

## ğŸ”„ Data Flow Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾

### Script Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCRIPT GENERATION FLOW                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: config, target_date, api_key
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Load config & prompts            â”‚
â”‚    - Read project config            â”‚
â”‚    - Load custom prompts (optional) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Build prompt                     â”‚
â”‚    - Date formatting                â”‚
â”‚    - JSON structure definition      â”‚
â”‚    - Length requirements            â”‚
â”‚    - Style instructions             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ModelRouter.generate_json()      â”‚
â”‚    â†“                                â”‚
â”‚    Try: gemini-2.5-flash (primary)  â”‚
â”‚    â”œâ”€ Retry 1 (2s delay)            â”‚
â”‚    â”œâ”€ Retry 2 (4s delay)            â”‚
â”‚    â””â”€ Retry 3 (8s delay)            â”‚
â”‚    â†“                                â”‚
â”‚    Fallback: gemini-2.5-flash-lite  â”‚
â”‚    â”œâ”€ Retry 1 (2s delay)            â”‚
â”‚    â”œâ”€ Retry 2 (4s delay)            â”‚
â”‚    â””â”€ Retry 3 (8s delay)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Validate response                â”‚
â”‚    - Check JSON structure           â”‚
â”‚    - Check length (MIN/MAX)         â”‚
â”‚    - If invalid â†’ retry with        â”‚
â”‚      enhanced prompt                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Enrich & save                    â”‚
â”‚    - Add default fields             â”‚
â”‚    - Generate UUID                  â”‚
â”‚    - Save to output/scripts/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Output: script_dict + file path
```

**Success Rate:** ~95%  
**Time:** 1-2 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹  
**Bottleneck:** Gemini API rate limiting

---

### TTS Synthesis Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TTS SYNTHESIS FLOW                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: script_dict, mode, api_key
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Extract text                     â”‚
â”‚    - shorts: script["script"]       â”‚
â”‚    - long_form: blocks{love/money/  â”‚
â”‚      health}                        â”‚
â”‚    - ad: script["narration_text"]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Sanitize text                    â”‚
â”‚    - Remove HTML/markdown           â”‚
â”‚    - Replace abbreviations          â”‚
â”‚    - Normalize whitespace           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Call Gemini TTS API              â”‚
â”‚    â†“                                â”‚
â”‚    client.models.generate_content(  â”‚
â”‚      model="gemini-2.5-flash",      â”‚
â”‚      contents=text                  â”‚
â”‚    )                                â”‚
â”‚    â†“                                â”‚
â”‚    ğŸš¨ PROBLEM: response.audio = Noneâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Fallback: Estimate duration      â”‚
â”‚    - Word count / 150 words/min     â”‚
â”‚    - Create silent WAV placeholder  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Save audio files                 â”‚
â”‚    - Format: 22050Hz, mono, WAV     â”‚
â”‚    - Location: output/audio/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Output: audio_map (paths + metadata)
```

**Success Rate:** 0% (silent audio)  
**Time:** 2-3 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹  
**Bottleneck:** ğŸš¨ TTS API Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

---

### Video Rendering Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VIDEO RENDERING FLOW                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: script_dict, audio_map, mode
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Get background                   â”‚
â”‚    â†“                                â”‚
â”‚    Try: Pixabay API (50/day limit)  â”‚
â”‚    â”œâ”€ Search with keywords          â”‚
â”‚    â”œâ”€ Download video                â”‚
â”‚    â””â”€ Resize/crop to aspect ratio   â”‚
â”‚    â†“                                â”‚
â”‚    Fallback: Gradient background    â”‚
â”‚    â””â”€ Generate colored frame        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Create text overlay              â”‚
â”‚    â†“                                â”‚
â”‚    Try: TextClip (imagemagick)      â”‚
â”‚    â””â”€ Font, size, color, position   â”‚
â”‚    â†“                                â”‚
â”‚    Fallback: PIL text rendering     â”‚
â”‚    â””â”€ Manual text layout            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Composite video                  â”‚
â”‚    - Background layer               â”‚
â”‚    - Text overlay layer             â”‚
â”‚    - Set duration from audio_map    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Add audio track                  â”‚
â”‚    - Load WAV from audio_map        â”‚
â”‚    - Sync with video duration       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. FFmpeg encoding                  â”‚
â”‚    - Codec: libx264 (h264)          â”‚
â”‚    - Audio codec: aac               â”‚
â”‚    - Bitrate: 5000k (shorts/ad)     â”‚
â”‚              8000k (long_form)      â”‚
â”‚    - FPS: 30                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Output: video.mp4
```

**Success Rate:** ~90%  
**Time:** 5-20 Ğ¼Ğ¸Ğ½ÑƒÑ‚ (Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°)  
**Bottleneck:** MoviePy Ğ¾Ğ´Ğ½Ğ¾Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹, Ğ½ĞµÑ‚ GPU acceleration

---

## ğŸ§© Model Router (Fallback ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°)

### Router Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MODEL ROUTER WITH FALLBACK                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Task: "script" | "tts" | "image_gen" | "error_analysis"
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Model Selection                     â”‚
â”‚                                     â”‚
â”‚ task = "script":                    â”‚
â”‚   primary: gemini-2.5-flash         â”‚
â”‚   fallback: gemini-2.5-flash-lite   â”‚
â”‚                                     â”‚
â”‚ task = "tts":                       â”‚
â”‚   primary: gemini-2.5-flash         â”‚
â”‚   fallback: gemini-2.5-flash-lite   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Retry Strategy (per model)                                â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ PRIMARY MODEL: gemini-2.5-flash                 â”‚     â”‚
â”‚  â”‚   â†“                                             â”‚     â”‚
â”‚  â”‚   Attempt 1  â†’  [fail] â†’ wait 2s                â”‚     â”‚
â”‚  â”‚   Attempt 2  â†’  [fail] â†’ wait 4s                â”‚     â”‚
â”‚  â”‚   Attempt 3  â†’  [fail] â†’ wait 8s                â”‚     â”‚
â”‚  â”‚   â†“                                             â”‚     â”‚
â”‚  â”‚   [ALL FAILED] â†’ switch to fallback             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                      â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ FALLBACK MODEL: gemini-2.5-flash-lite           â”‚     â”‚
â”‚  â”‚   â†“                                             â”‚     â”‚
â”‚  â”‚   Attempt 1  â†’  [fail] â†’ wait 2s                â”‚     â”‚
â”‚  â”‚   Attempt 2  â†’  [fail] â†’ wait 4s                â”‚     â”‚
â”‚  â”‚   Attempt 3  â†’  [fail] â†’ wait 8s                â”‚     â”‚
â”‚  â”‚   â†“                                             â”‚     â”‚
â”‚  â”‚   [ALL FAILED] â†’ raise RuntimeError             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Success: return response
Failure: raise RuntimeError("All models exhausted")
```

**Total attempts:** 6 (3 primary + 3 fallback)  
**Max wait time:** 2+4+8 = 14 seconds per model  
**Total max wait:** 28 seconds

### Router Stats

```python
router = get_router(api_key)
stats = router.get_stats()

# Example output:
{
  "total_attempts": 8,
  "successful_attempts": 7,
  "failed_attempts": 1,
  "model_usage": {
    "gemini-2.5-flash": 6,
    "gemini-2.5-flash-lite": 2
  }
}
```

---

## ğŸ“ Output Structure

```
output/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ <project>/
â”‚       â””â”€â”€ <YYYYMMDD>/
â”‚           â”œâ”€â”€ short_<uuid>.json
â”‚           â”œâ”€â”€ long_form_<uuid>.json
â”‚           â””â”€â”€ ad_<uuid>.json
â”‚
â”œâ”€â”€ audio/
â”‚   â””â”€â”€ <project>/
â”‚       â”œâ”€â”€ shorts_main.wav
â”‚       â”œâ”€â”€ long_form_love.wav
â”‚       â”œâ”€â”€ long_form_money.wav
â”‚       â”œâ”€â”€ long_form_health.wav
â”‚       â””â”€â”€ ad_main.wav
â”‚
â””â”€â”€ videos/
    â””â”€â”€ <project>/
        â”œâ”€â”€ shorts.mp4
        â”œâ”€â”€ long_form.mp4
        â””â”€â”€ ad.mp4

temp/  # Temporary stock videos
â””â”€â”€ stock_<random>.mp4  (deleted after rendering)
```

---

## ğŸ”® Future Architecture (Issue #24)

### Planned: Modular Content Modes System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUTURE: PLUGGABLE CONTENT MODES                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BaseContentMode (interface)
  â”œâ”€ render(script, audio) â†’ video
  â”œâ”€ validate_config()
  â””â”€ get_metadata()

Implementations:
  â”œâ”€ TextStockMode (current system)
  â”‚   â””â”€ Static text + stock video
  â”‚
  â”œâ”€ ShortsCarouselMode
  â”‚   â””â”€ Image carousel + animations
  â”‚
  â”œâ”€ AnimationAIMode
  â”‚   â””â”€ Remotion + LottieFiles
  â”‚
  â””â”€ CustomMode
      â””â”€ User-defined rendering logic

Configuration:
  video:
    rendering_mode: "TextStockMode"
    mode_config:
      transition_effects: true
      animation_style: "fade"
```

**Benefits:**
- Ğ›ĞµĞ³ĞºĞ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ²Ğ¸Ğ´ĞµĞ¾
- A/B testing Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¾Ğ²
- ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°

**Effort:** 4-6 Ğ½ĞµĞ´ĞµĞ»ÑŒ (Phase 4 Ğ² roadmap)

---

## ğŸ“ Configuration Files

### Project Config Example

```yaml
# projects/youtube_horoscope/config.yaml

project:
  id: youtube_horoscope
  name: "Daily Horoscope"
  folder: youtube_horoscope
  niche: astrology
  target_audience: "Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ñ‹ 18-45"

generation:
  script_mode: shorts  # shorts | long_form | ad
  primary_model: gemini-2.5-flash
  fallback_models:
    - gemini-2.5-flash-lite
  temperature: 0.8

audio:
  primary_engine: gemini-2.5-flash
  fallback_engine: gemini-2.5-flash-lite
  engines:
    gemini-2.5-flash:
      enabled: true
      speed: 1.0

video:
  format: shorts  # shorts | long_form | ad
  fps: 30
  codec: libx264
  quality: high

subtitles:
  enabled: false  # Part 4

upload:
  enabled: false  # Part 5
```

---

## ğŸ¯ Key Takeaways

### âœ… What Works
1. **Script generation** - Ğ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾, Ñ fallback Ğ¸ retry
2. **Config-driven architecture** - Ğ»ĞµĞ³ĞºĞ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
3. **ModelRouter** - Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ abstraction Ğ´Ğ»Ñ fallback
4. **Multi-format support** - shorts/long_form/ad Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹

### âŒ What Doesn't Work
1. **TTS ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ñ‚Ğ¸ÑˆĞ¸Ğ½Ñƒ** - ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ±Ğ»Ğ¾ĞºĞµÑ€
2. **ĞĞµÑ‚ ÑÑƒĞ±Ñ‚Ğ¸Ñ‚Ñ€Ğ¾Ğ²** - ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ engagement
3. **ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³** - Ğ½Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ

### ğŸ”® Future Vision
1. **Modular content modes** - pluggable rendering engines
2. **AI-powered visuals** - Flux.1 image generation
3. **Auto-upload** - zero-touch publishing
4. **Analytics-driven** - A/B testing & optimization

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** Ğ”ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025  
**ĞĞ²Ñ‚Ğ¾Ñ€:** AI Agent Tech Lead  
**Ğ¡Ğ¼. Ñ‚Ğ°ĞºĞ¶Ğµ:** IMPLEMENTATION_STATUS.md, DEVELOPMENT_ROADMAP.md
