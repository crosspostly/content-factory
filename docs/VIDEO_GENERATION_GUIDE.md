# ğŸ¥ Video Generation Pipeline - ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ

## ĞšĞ°Ğº ÑĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ´Ğ»Ñ Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿Ğ¾Ğ²

### ğŸ“ Pipeline Overview

Ğ’Ğ¸Ğ´ĞµĞ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ğ² **3 ÑÑ‚Ğ°Ğ¿Ğ°**:

```
PART 1: SCRIPT GENERATION     Part 2: TTS SYNTHESIS      PART 3: VIDEO RENDERING
(Ñ‚ĞµĞºÑÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ)    â†’        (Ğ¾Ğ·Ğ²ÑƒÑ‡ĞºĞ° Ñ‚ĞµĞºÑÑ‚Ğ°)     â†’     (Ğ¼Ğ¾Ğ½Ñ‚Ğ°Ğ¶ Ğ²Ğ¸Ğ´ĞµĞ¾)
        â†“                            â†“                           â†“
JSON Ñ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼             WAV Ğ°ÑƒĞ´Ğ¸Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ñ‹          MP4 Ğ²Ğ¸Ğ´ĞµĞ¾ Ñ„Ğ°Ğ¹Ğ»
```

---

## PART 1: Script Generation (Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹)

### Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚

**Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
- `projects/youtube_horoscope/config.yaml` â€” ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
- `projects/youtube_horoscope/prompts/shorts_scenario.txt` â€” Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ (Ñ„Ğ°Ğ¹Ğ» `core/generators/script_generator.py`):**

```python
# Ğ”Ğ»Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° shorts
script = {
    "hook": "Ğ’Ğ°Ñˆ Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° 2025-12-13",  # Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº (Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ)
    "content_type": "shorts",
    "script": "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° 2025-12-13. (placeholder script)",  # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚
    "visual_hints": ["stars", "zodiac"],  # ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ´ĞµĞ¾
    "engagement_cta": "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ Ğ½Ğ° Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿Ñ‹!",  # Call-to-action
    "duration_sec_target": 30,  # Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
}
```

**Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² `output/scripts/youtube_horoscope/YYYYMMDD/short_*.json`

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²

#### Shorts (Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ 1080Ã—1920)
```json
{
  "hook": "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ",
  "script": "ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ...",
  "engagement_cta": "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ!",
  "duration_sec_target": 30
}
```

#### Long-form (Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ 1920Ã—1080)
```json
{
  "video_title": "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° 2025-12-13",
  "blocks": {
    "love": "Ğ›ÑĞ±Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¿ĞµĞºÑ‚Ğ¸Ğ²Ñ‹ Ğ½Ğ° Ğ´ĞµĞ½ÑŒ...",
    "money": "Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ñ‹ Ğ½Ğ° Ğ´ĞµĞ½ÑŒ...",
    "health": "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ¸ Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğµ Ğ½Ğ° Ğ´ĞµĞ½ÑŒ..."
  },
  "chapters": [
    {"title": "Ğ›ÑĞ±Ğ¾Ğ²ÑŒ", "timestamp": "0:00"},
    {"title": "Ğ”ĞµĞ½ÑŒĞ³Ğ¸", "timestamp": "4:00"},
    {"title": "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ", "timestamp": "8:00"}
  ],
  "duration_target_min": 12
}
```

---

## PART 2: TTS Synthesis (ĞĞ·Ğ²ÑƒÑ‡ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Gemini)

### âŒ Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ±: Edge-TTS (Ğ±Ñ‹Ğ»Ğ° Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ°)

Ğ’ ĞºĞ¾Ğ´Ğµ Ğ±Ñ‹Ğ» ĞºĞ¾Ğ´ Ğ´Ğ»Ñ Edge-TTS:
```python
from edge_tts import Communicator
```

ĞĞ ÑÑ‚Ğ¾ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ»Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ² Ğ¸ Ğ¸Ğ¼ĞµĞ»Ğ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ñ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹.

### âœ… ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ±: Gemini TTS API

**Ğ¤Ğ°Ğ¹Ğ»:** `core/generators/tts_generator.py`

**Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ:**
```python
def synthesize(config, script, mode, api_key):
    """
    Ğ¡Ğ¸Ğ½Ñ‚ĞµĞ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ² Ñ€ĞµÑ‡ÑŒ Ñ‡ĞµÑ€ĞµĞ· Gemini API
    
    Returns:
        {
            "blocks": {"main": "path/to/audio.wav"},
            "engine_used": "gemini-2.5-tts",
            "total_duration_sec": 23.5,
            "sample_rate": 22050,
            "channels": 1
        }
    """
```

### ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ TTS Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°

#### Shorts (Ğ¾Ğ´Ğ¸Ğ½ Ğ±Ğ»Ğ¾Ğº)
```
Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (script):
â”œâ”€ hook: "Ğ’Ğ°Ñˆ Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ"
â”œâ”€ script: "ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚..."
â””â”€ engagement_cta: "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ!"
        â†“
  ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚ÑÑ Ğ²ĞµÑÑŒ Ñ‚ĞµĞºÑÑ‚ â†’ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ÑÑ Ğ² Gemini TTS API
        â†“
Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:
â”œâ”€ output/audio/youtube_horoscope/shorts_main.wav (22050 Hz, mono)
â””â”€ blocks = {"main": "path/to/shorts_main.wav"}
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ°:**
```python
api_key = os.getenv('GOOGLE_AI_API_KEY')

audio_result = tts_generator.synthesize(
    config=config,
    script={
        "hook": "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿",
        "script": "ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ‚ĞµĞºÑÑ‚...",
        "engagement_cta": "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ!"
    },
    mode="shorts",
    api_key=api_key
)

print(audio_result['blocks']['main'])  # "output/audio/.../shorts_main.wav"
print(audio_result['total_duration_sec'])  # 23.5
```

#### Long-form (Ñ‚Ñ€Ğ¸ Ğ±Ğ»Ğ¾ĞºĞ°: love, money, health)
```
Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (script["blocks"]):
â”œâ”€ "love": "Ğ›ÑĞ±Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¿ĞµĞºÑ‚Ğ¸Ğ²Ñ‹..."
â”œâ”€ "money": "Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ñ‹..."
â””â”€ "health": "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ Ğ¸ Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğµ..."
        â†“
  ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ±Ğ»Ğ¾Ğº Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ â†’ Gemini TTS API
        â†“
Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:
â”œâ”€ output/audio/youtube_horoscope/long_form_love.wav
â”œâ”€ output/audio/youtube_horoscope/long_form_money.wav
â”œâ”€ output/audio/youtube_horoscope/long_form_health.wav
â””â”€ blocks = {
     "love": "path/to/love.wav",
     "money": "path/to/money.wav",
     "health": "path/to/health.wav"
   }
```

#### Ad (Ğ¾Ğ´Ğ¸Ğ½ Ğ±Ğ»Ğ¾Ğº)
```
Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (script):
â””â”€ narration_text: "Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ..."
        â†“
  Transmitter â†’ Gemini TTS API
        â†“
Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:
â””â”€ output/audio/youtube_horoscope/ad_main.wav
```

### ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ TTS Ğ¸Ğ· ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ°

**Ğ¤Ğ°Ğ¹Ğ»:** `projects/youtube_horoscope/config.yaml`

```yaml
audio:
  engines:
    gemini-tts:
      voice: "ru-RU-Neural2-C"  # Ğ–ĞµĞ½ÑĞºĞ¸Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ñ (Ñ‚Ñ‘Ğ¿Ğ»Ñ‹Ğ¹, Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹)
      speed: 1.0                 # 0.5-2.0 (1.0 = Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ)
      output_format: "audio/wav"
      sample_rate: 22050         # Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ´ĞµĞ¾
      channels: 1                # ĞœĞ¾Ğ½Ğ¾ (ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‚ Ğ¼ĞµÑÑ‚Ğ¾)
```

### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°

```python
VOICES = {
    "russian_female_warm": "ru-RU-Neural2-C",     # ğŸ‘© Ğ–ĞµĞ½ÑĞºĞ¸Ğ¹ (Ñ‚Ñ‘Ğ¿Ğ»Ñ‹Ğ¹)
    "russian_female_neutral": "ru-RU-Neural2-A",  # ğŸ‘© Ğ–ĞµĞ½ÑĞºĞ¸Ğ¹ (Ğ½ĞµĞ¹Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
    "russian_male": "ru-RU-Neural2-B",            # ğŸ‘¨ ĞœÑƒĞ¶ÑĞºĞ¾Ğ¹
}
```

---

## PART 3: Video Rendering (ĞœĞ¾Ğ½Ñ‚Ğ°Ğ¶ Ğ²Ğ¸Ğ´ĞµĞ¾)

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ²Ğ¸Ğ´ĞµĞ¾

**Ğ¤Ğ°Ğ¹Ğ»:** `core/generators/video_renderer.py`

### âœ¨ ĞšĞ°Ğº ÑĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ´Ğ»Ñ Shorts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            VIDEO COMPOSITION                 â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LAYER 1: Background Clip             â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚
â”‚  â”‚  - Pixabay Ğ²Ğ¸Ğ´ĞµĞ¾ (ÑÑ‚Ğ¾ĞºĞ¸)             â”‚  â”‚
â”‚  â”‚  - Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ â†’ Ğ³Ñ€Ğ°Ğ´Ğ¸ĞµĞ½Ñ‚ (Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹) â”‚  â”‚
â”‚  â”‚  - Ğ’ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ (1080Ã—1920)          â”‚  â”‚
â”‚  â”‚  - Duration: 30 ÑĞµĞº                  â”‚  â”‚
â”‚  â”‚                                       â”‚  â”‚
â”‚  â”‚  Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº:                            â”‚  â”‚
â”‚  â”‚    â”œâ”€ PIXABAY_API (ĞµÑĞ»Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½)   â”‚  â”‚
â”‚  â”‚    â”‚  Keywords: "horoscope", "stars"â”‚  â”‚
â”‚  â”‚    â””â”€ Fallback: Ñ†Ğ²ĞµÑ‚Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ğ½          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LAYER 2: Text Overlay                â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚
â”‚  â”‚  - Hook: "Ğ’Ğ°Ñˆ Ğ³Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ"  â”‚  â”‚
â”‚  â”‚  - Ğ Ğ°Ğ·Ğ¼ĞµÑ€: 60pt, Ğ±ĞµĞ»Ñ‹Ğ¹, Ğ¶Ğ¸Ñ€Ğ½Ñ‹Ğ¹      â”‚  â”‚
â”‚  â”‚  - ĞŸĞ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ: Ñ†ĞµĞ½Ñ‚Ñ€                  â”‚  â”‚
â”‚  â”‚  - Ğ¢ĞµĞ½ÑŒ Ğ´Ğ»Ñ Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾ÑÑ‚Ğ¸               â”‚  â”‚
â”‚  â”‚  - Duration: 30 ÑĞµĞº                  â”‚  â”‚
â”‚  â”‚                                       â”‚  â”‚
â”‚  â”‚  Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ·:                    â”‚  â”‚
â”‚  â”‚    â”œâ”€ MoviePy TextClip (ĞµÑĞ»Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚â”‚  â”‚
â”‚  â”‚    â””â”€ Fallback PIL Image             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LAYER 3: Audio Track                 â”‚  â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚  â”‚
â”‚  â”‚  - ĞŸÑƒÑ‚ÑŒ: output/audio/.../shorts.wav â”‚  â”‚
â”‚  â”‚  - Duration: 23.5 ÑĞµĞº (Ğ¾Ñ‚ TTS)       â”‚  â”‚
â”‚  â”‚  - Sample rate: 22050 Hz             â”‚  â”‚
â”‚  â”‚  - Format: WAV (Mono)                â”‚  â”‚
â”‚  â”‚                                       â”‚  â”‚
â”‚  â”‚  Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ²Ğ¸Ğ´ĞµĞ¾:                       â”‚  â”‚
â”‚  â”‚    â””â”€ set_audio() â†’ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                              â”‚
â”‚  COMPOSE (MoviePy CompositeVideoClip)       â”‚
â”‚    â†“                                         â”‚
â”‚  EXPORT (write_videofile)                   â”‚
â”‚    â”œâ”€ Codec: libx264 (H.264)               â”‚
â”‚    â”œâ”€ FPS: 30                               â”‚
â”‚    â”œâ”€ Audio Codec: aac                     â”‚
â”‚    â”œâ”€ Bitrate: 5000k (Shorts)              â”‚
â”‚    â””â”€ Output: output/videos/.../shorts.mp4â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ²Ğ¸Ğ´ĞµĞ¾

**Ğ¤Ğ°Ğ¹Ğ»:** `core/generators/video_renderer.py`

```python
VIDEO_CONFIG = {
    "shorts": {
        "width": 1080,
        "height": 1920,
        "aspect": "9:16",
        "fps": 30,
        "bitrate": "5000k",
    },
    "long_form": {
        "width": 1920,
        "height": 1080,
        "aspect": "16:9",
        "fps": 30,
        "bitrate": "8000k",
    },
    "ad": {
        "width": 1080,
        "height": 1920,
        "aspect": "9:16",
        "fps": 30,
        "bitrate": "5000k",
    },
}
```

### ğŸ¨ Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ†Ğ²ĞµÑ‚Ğ° (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)

```python
color_map = {
    "mystical": (20, 10, 40),     # Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹ (Ğ´Ğ»Ñ shorts)
    "intro": (30, 15, 50),        # Ğ¢ĞµĞ¼Ğ½ĞµĞµ (Ğ´Ğ»Ñ intro long-form)
    "outro": (40, 20, 60),        # Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ„Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹ (Ğ´Ğ»Ñ outro)
    "love": (150, 30, 60),        # ĞšÑ€Ğ°ÑĞ½Ñ‹Ğ¹ (Ğ±Ğ»Ğ¾Ğº Ğ»ÑĞ±Ğ²Ğ¸)
    "money": (50, 150, 50),       # Ğ—ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹ (Ğ±Ğ»Ğ¾Ğº Ğ´ĞµĞ½ĞµĞ³)
    "health": (100, 150, 255),    # Ğ¡Ğ¸Ğ½Ğ¸Ğ¹ (Ğ±Ğ»Ğ¾Ğº Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ)
    "ad": (40, 40, 60),           # Ğ¢Ñ‘Ğ¼Ğ½Ñ‹Ğ¹ (Ğ´Ğ»Ñ Ñ€ĞµĞºĞ»Ğ°Ğ¼)
}
```

---

## ğŸ“Š ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Shorts

### Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

```
$ Format: shorts
$ Date: 2025-12-13
$ Project: youtube_horoscope
$ GOOGLE_AI_API_KEY: xxxxx...xxxxx
$ PIXABAY_API_KEY: xxxxx...xxxxx
```

### Ğ­Ñ‚Ğ°Ğ¿ 1: Script Generation

```json
{
  "hook": "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° 2025-12-13",
  "script": "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° 2025-12-13. (placeholder script)",
  "visual_hints": ["stars", "zodiac"],
  "engagement_cta": "ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ!",
  "duration_sec_target": 30
}
```

**Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾ Ğ²:**
```
output/scripts/youtube_horoscope/20251213/short_a1b2c3d4.json
```

### Ğ­Ñ‚Ğ°Ğ¿ 2: TTS Synthesis

**Ğ’Ñ‹Ğ·Ğ¾Ğ²:**
```python
audio_result = tts_generator.synthesize(
    config=config,
    script=script,
    mode="shorts",
    api_key="AIzaSyC..."
)
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```
âœ… Audio synthesized
   Engine: gemini-2.5-tts
   Duration: 23.5s
   Sample rate: 22050 Hz
   Blocks:
     - main: output/audio/youtube_horoscope/shorts_main.wav (2.3 MB)
```

### Ğ­Ñ‚Ğ°Ğ¿ 3: Video Rendering

**Ğ’Ñ‹Ğ·Ğ¾Ğ²:**
```python
video_path = video_renderer.render(
    config=config,
    script=script,
    audio_map=audio_result,
    mode="shorts"
)
```

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:**
```
1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾:
   - Pixabay API Ñ keywords: ["horoscope", "astrology"]
   - Download â†’ Resize to 1080Ã—1920
   - Duration: 23.5 ÑĞµĞº (Ğ¿Ğ¾ Ğ°ÑƒĞ´Ğ¸Ğ¾)
   
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹:
   - Hook: "Ğ“Ğ¾Ñ€Ğ¾ÑĞºĞ¾Ğ¿ Ğ½Ğ° 2025-12-13"
   - TextClip (60pt, white, bold, centered)
   
3. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ°ÑƒĞ´Ğ¸Ğ¾:
   - AudioFileClip("output/audio/.../shorts_main.wav")
   - Duration: 23.5 ÑĞµĞº
   
4. Ğ¡ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¸Ğ´ĞµĞ¾:
   - CompositeVideoClip([background_clip, text_clip])
   - .set_audio(audio_clip)
   
5. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ:
   - Codec: libx264 (H.264)
   - FPS: 30
   - Bitrate: 5000k
   - Output: output/videos/youtube_horoscope/shorts.mp4 (45.3 MB)
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```
âœ… Video rendered: output/videos/youtube_horoscope/shorts.mp4
   Size: 45.3 MB
   Resolution: 1080Ã—1920
   FPS: 30
   Duration: 23.5s
   Codec: h264
```

---

## ğŸš€ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Workflow

### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ

1. ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ GitHub â†’ **Actions** â†’ **Generate Horoscope Video**
2. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **Run workflow**
3. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:
   - Format: `shorts` | `long-form` | `ad`
   - Date: `2025-12-13` (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ)
   - Project: `youtube_horoscope` (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)
4. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ **Run workflow**

### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ² **06:00 UTC (09:00 MSK)** Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:
```bash
$ Format: shorts
$ Date: <today>
$ Project: youtube_horoscope
```

### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ

**Ğ¤Ğ°Ğ¹Ğ»:** `.github/workflows/generate-horoscope-video.yml`

```yaml
schedule:
  - cron: '0 6 * * *'  # ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ² 06:00 UTC
```

**Cron ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ¼Ğ¸Ğ½ÑƒÑ‚Ğ° (0 - 59)
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ñ‡Ğ°Ñ (0 - 23)
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ´ĞµĞ½ÑŒ Ğ¼ĞµÑÑÑ†Ğ° (1 - 31)
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ¼ĞµÑÑÑ† (1 - 12)
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ´ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸ (0 - 6) (ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ğ° = 0 Ğ¸Ğ»Ğ¸ 7)
â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚
0 6 * * *  â†’ 06:00 ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ
0 6 * * 1  â†’ 06:00 Ğ¿Ğ¾ Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸ĞºĞ°Ğ¼
0 */6 * *  â†’ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 6 Ñ‡Ğ°ÑĞ¾Ğ²
```

---

## ğŸ“¥ Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²

**ĞŸĞ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ workflow:**

1. GitHub â†’ **Actions** â†’ workflow run
2. Scroll down â†’ **Artifacts**
3. Download `horoscope-output-XXX`
4. Ğ Ğ°ÑĞ¿Ğ°ĞºÑƒĞ¹Ñ‚Ğµ ZIP

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²:**
```
output/
â”œâ”€â”€ scripts/youtube_horoscope/20251213/
â”‚   â””â”€â”€ short_a1b2c3d4.json          â† Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹
â”œâ”€â”€ audio/youtube_horoscope/
â”‚   â””â”€â”€ shorts_main.wav              â† ĞĞ·Ğ²ÑƒÑ‡ĞºĞ°
â””â”€â”€ videos/youtube_horoscope/
    â”œâ”€â”€ shorts.mp4                    â† Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾
    â””â”€â”€ metadata_shorts.json          â† ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
```

---

## âŒ Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### Error: GOOGLE_AI_API_KEY not set

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
1. GitHub â†’ Settings â†’ Secrets and variables â†’ Actions
2. Add `GOOGLE_AI_API_KEY`
3. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ ĞºĞ»ÑÑ‡ Ñ [ai.google.dev](https://ai.google.dev)

### Error: PIXABAY_API_KEY not set

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, Ğ²Ğ¸Ğ´ĞµĞ¾ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ†Ğ²ĞµÑ‚ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ²Ğ¸Ğ´ĞµĞ¾)
1. GitHub â†’ Settings â†’ Secrets â†’ Add `PIXABAY_API_KEY`
2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ñ [pixabay.com/api](https://pixabay.com/api)

### Error: ModuleNotFoundError: No module named 'moviepy'

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¶Ğµ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ Ğ² `requirements.txt`, workflow ÑĞ°Ğ¼ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚.

### Error: ffmpeg not found

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Workflow ÑĞ°Ğ¼ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· `apt-get install ffmpeg`.

### Ğ’Ğ¸Ğ´ĞµĞ¾ Ğ¿ÑƒÑÑ‚Ğ¾Ğµ (Ğ½ĞµÑ‚ Ñ‚ĞµĞºÑÑ‚Ğ°)

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** TextClip Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ±ĞµĞ· ImageMagick.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ´ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ fallback'Ğ¸Ñ‚ÑÑ Ğ½Ğ° PIL Image.

---

## ğŸ“ˆ Performance

| Ğ­Ñ‚Ğ°Ğ¿ | Ğ’Ñ€ĞµĞ¼Ñ | Ğ Ğ°Ğ·Ğ¼ĞµÑ€ |
|------|-------|--------|
| Part 1 (Script) | 2-3 ÑĞµĞº | 5 KB JSON |
| Part 2 (TTS) | 10-15 ÑĞµĞº | 2-5 MB WAV |
| Part 3 (Video) | 30-60 ÑĞµĞº | 40-80 MB MP4 |
| **Ğ’ÑĞµĞ³Ğ¾** | **45-80 ÑĞµĞº** | **50-100 MB** |

### Ğ¡ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼

Pip cache + system cache ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‚ **5-10 ÑĞµĞº** Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ run.

---

## ğŸ”— Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ¼Ğ¸

### YouTube

```yaml
upload:
  platforms:
    - youtube
  youtube:
    channel_id: UC...
    playlist: Horoscopes
    visibility: public
```

*Ğ ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ Ğ² Part 4*

### TikTok / Instagram Reels

```yaml
upload:
  platforms:
    - tiktok
    - instagram
```

*Ğ ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ Ğ² Part 4*

---

**Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:** 1.0  
**Ğ”Ğ°Ñ‚Ğ°:** 13 Ğ”ĞµĞºĞ°Ğ±Ñ€Ñ 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Part 1, 2, 3 Complete
